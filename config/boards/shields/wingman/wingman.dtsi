#include <dt-bindings/zmk/matrix_transform.h>

/ {
    chosen {
        zmk,kscan = &kscan0;
        zmk,matrix-transform = &default_transform;
        zmk,backlight = &backlight;
    };

    backlight: backlight0 {
        compatible = "zmk,led-sk6812";
        pin = <&gpio0 20 GPIO_ACTIVE_HIGH>;
        compatible = "zmk,ws2812";
        gpios = <&gpio0 20 GPIO_ACTIVE_HIGH>;
        label = "backlight";
        chain-length = <34>;
        #address-cells = <1>;
        #size-cells = <0>;

        led@0 { reg = <0>; };
        led@1 { reg = <1>; };
        led@2 { reg = <2>; };
        led@3 { reg = <3>; };
        led@4 { reg = <4>; };
        led@5 { reg = <5>; };
        led@6 { reg = <6>; };
        led@7 { reg = <7>; };
        led@8 { reg = <8>; };
        led@9 { reg = <9>; };
        led@10 { reg = <10>; };
        led@11 { reg = <11>; };
        led@12 { reg = <12>; };
        led@13 { reg = <13>; };
        led@14 { reg = <14>; };
        led@15 { reg = <15>; };
        led@16 { reg = <16>; };
        led@17 { reg = <17>; };
        led@18 { reg = <18>; };
        led@19 { reg = <19>; };
        led@20 { reg = <20>; };
        led@21 { reg = <21>; };
        led@22 { reg = <22>; };
        led@23 { reg = <23>; };
        led@24 { reg = <24>; };
        led@25 { reg = <25>; };
        led@26 { reg = <26>; };
        led@27 { reg = <27>; };
        led@28 { reg = <28>; };
        led@29 { reg = <29>; };
        led@30 { reg = <30>; };
        led@31 { reg = <31>; };
        led@32 { reg = <32>; };
        led@33 { reg = <33>; };
    };

    default_transform: keymap_transform_0 {
        compatible = "zmk,matrix-transform";
        columns = <16>;
        rows = <5>;
        map = <
            RC(0, 0) RC(0, 1) RC(0, 2) RC(0, 3) RC(0, 4) RC(0, 5) RC(0, 6) RC(0, 7)  RC(0, 8) RC(0, 9) RC(0, 10) RC(0, 11) RC(0, 12) RC(0, 13) RC(0, 14) RC(0, 15)
            RC(1, 0) RC(1, 1) RC(1, 2) RC(1, 3) RC(1, 4) RC(1, 5) RC(1, 6) RC(1, 7)  RC(1, 8) RC(1, 9) RC(1, 10) RC(1, 11) RC(1, 12) RC(1, 13) RC(1, 14) RC(1, 15)
                     RC(2, 0) RC(2, 1) RC(2, 2) RC(2, 3) RC(2, 4) RC(2, 5) RC(2, 6)  RC(2, 7) RC(2, 8) RC(2,  9) RC(2, 10) RC(2, 11) RC(2, 12) RC(2, 13)
                              RC(3, 0) RC(3, 1) RC(3, 2) RC(3, 3) RC(3, 4) RC(3, 5)  RC(3, 6) RC(3, 7) RC(3,  8) RC(3,  9) RC(3, 10) RC(3, 11)
                                       RC(4, 0) RC(4, 1) RC(4, 2) RC(4, 3) RC(4, 4)  RC(4, 5) RC(4, 6) RC(4,  7) RC(4,  8) RC(4, 9)
        >;
    };

    kscan0: kscan {
        compatible = "zmk,kscan-gpio-matrix";
        wakeup-source;
        diode-direction = "col2row";
        row-gpios = <&gpio0 0  (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)>,
                    <&gpio0 15 (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)>,
                    <&gpio0 9  (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)>,
                    <&gpio0 10 (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)>,
                    <&gpio0 16 (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)>;
    };

};
